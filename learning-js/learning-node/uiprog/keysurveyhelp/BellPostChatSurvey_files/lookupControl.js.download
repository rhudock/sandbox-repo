if(typeof ksConfig==="undefined"){throw"There is no ksConfig.";}function LQ_Control(s,t,r){var e=jQuery;var j=function(){var v=LQ_Utils.getFinalSelectId(s.qid);LQ_Core.addQuestionElement(s.qid,v);var u=LQ_Core.getInstance(s.qid,v);u.initFinalSelect(s.qid,false);LQ_Core.setElementConfig(v,s);};var g=function(){var u="lookupField_"+s.id;LQ_Core.addQuestionElement(s.qid,u);LQ_Core.addFieldSelectListener(s.qid,s.id,s.fieldId);LQ_Core.setElementConfig(u,s);};var a=function(){var u=e("#lookupContainter_"+s.id);i(u);};var i=function(u){var v=s.elementId;var A="";if(s.labelPosition=="LEFT"){if(s.isMultiple){A+="<table><tr><td>";}else{A+='<div class="H3 LQLeftTD LQLabelBlock">';}A+=b("lqLabelLeft");}if(s.isMultiple){A+="</td></tr><tr><td>";}else{A+="</div>";}if(!s.isMultiple){A+='<div style="" class="H24 LQRightTD LQDropdownBlock">';}if(s.labelPosition=="TOP"){A+=b("lqLabelTop");A+="<br/>";}if(r){A+='<div id="LookupControl_'+s.id+'" class=" dev_lookupField '+r.className+'" dev_zIndex="'+r.zIndex+'" style="position: absolute; top: '+r.posY+"px; left: "+r.posX+"px; width: "+r.width+"px; height: "+r.height+"px; z-index: "+r.zIndex+';">';}else{A+='<div id="LookupControl_'+s.id+'">';}if(!ksConfig.isEform||r){if(s.isMultiple){A+='<table id="'+v+'" class="multipleLookupFieldFilterResult lookupFieldFilterResult" cellpadding="0" cellspacing="5" border="0"><tr><td>';}else{A+='<div class="lq_modalView"></div>';}var y=LQ_Core.getEmptyText(s.qid,s.elementId);var x=(s.isMultiple)?"clearSearchBtn":"clearBtn";var z=(s.isMultiple)?"LQ_Core.clearSearch('"+s.qid+"', '"+v+"', true)":"LQ_Core.clearSelect('"+s.qid+"', '"+v+"')";var w=(s.isMultiple)?" style='width: 100%'":"";A+='<div class="lookupField"'+w+'><input type="text" class="lq_fieldInput" id="'+v+'_input" value="'+y+'" autocomplete="off" title="'+s.elementTitle+'" dir="auto"/><input type="button" onclick="'+z+'" class="lq_icon '+s.iconImageClass+" "+x+'" id="'+v+'_reset" style="display: none;" title="'+LQ_GuiConfig.txtClear+'"/>';if(s.isMultiple){A+="</div></td></tr><tr><td><div class='lq_overflowDiv' id='"+v+"_table'></div></td></tr><tr><td>";}else{A+='<input type="button" onclick="LQ_Core.triggerSelect(\''+s.qid+"', '"+v+'\')" class="lq_icon '+s.iconImageClass+' dropdownBtn" id="'+v+'_cursor" title="'+s.dropdownTitle+'"/>';A+='<div id="'+v+'" name="'+s.elementName+'" class="'+s.elementClass+"\" style=\"display:none\"><div class='lq_overflowDiv' id='"+v+"_scroll'><ul class='lq_resList' id='"+v+"_table' onselectstart='return false;' ondragstart='return false;'></ul></div>";}A+="<div class='lq_pagination'>";if(!s.isMultiple){A+="<div class='lq_closeBtnDiv'><input type='button' class='lq_icon "+s.iconImageClass+" closeBtn' onclick='LQ_Core.triggerSelect(\""+s.qid+'", "'+v+'")\' title="'+LQ_GuiConfig.txtClose+'"></div>';}A+="<div align=\"center\"><input type='button' onclick='LQ_Core.changePage(\""+s.qid+'", "'+v+"\", 1);' class='lq_icon "+s.iconImageClass+" firstBtn' id='btnFirst_"+v+"' title=\""+LQ_GuiConfig.txtFirst+"\"/><input type='button' onclick='LQ_Core.changePage(\""+s.qid+'", "'+v+"\", 2);' class='lq_icon "+s.iconImageClass+" leftBtn' id='btnPrev_"+v+"' title=\""+LQ_GuiConfig.txtPrevious+'"/>';if(s.isMultiple){A+='<span class="H3">'+LQ_GuiConfig.txtPage+":</span>";}A+="<input type='text' id='lookupPage_"+v+"' class='pageNumber' onfocus='LQ_Core.selectPageText(\""+v+"\")' onkeyup='LQ_Core.changePage(\""+s.qid+'", "'+v+"\", 5, event)' title='"+s.pageNumberTitle+"' dir='auto'/><input type='button' onclick='LQ_Core.changePage(\""+s.qid+'", "'+v+"\", 3);' class='lq_icon "+s.iconImageClass+" rightBtn' id='btnNext_"+v+"' title=\""+LQ_GuiConfig.txtNext+"\"/><input type='button' onclick='LQ_Core.changePage(\""+s.qid+'", "'+v+"\", 4);' class='lq_icon "+s.iconImageClass+" lastBtn' id='btnLast_"+v+"' title=\""+LQ_GuiConfig.txtLast+'"/></div></div>';if(s.isMultiple){A+="</td></tr></table>";}else{A+="</div></div>";}}A+="</div>";if(s.isMultiple){A+="</td></tr></table>";}else{A+="</div>";}LQ_Utils.log("Rendered HTML: "+A);if(u.length>0){u.empty();u.html(A);LQ_Utils.log("Render element "+v+" completed.");}else{LQ_Utils.log("WARNING: Can't render element "+v+". Container is not found.");}};var b=function(w){var v="";if(t){v+='<div class="'+t.className+'" style="position: absolute; top: '+t.posY+"px; left: "+t.posX+"px; width: "+t.width+"px; height: "+t.height+"px; z-index: "+t.zIndex+'; white-space: normal;">';}if(!ksConfig.isEform||t){var y;if(s.isMultiple){y="mlqLabel_"+s.qid;}else{y="lqLabel_"+s.qid;}v+='<label id="'+y+'" class="'+w+'" dir="auto">'+s.label+"</label>";}if(s.isMultiple){if(t){v+='<div style="left:100%;width:300px;position:absolute;top:0;">';}var u=LQ_Utils.getFinalSelectId(s.qid);var x=e("#"+u).attr("tabIndex")-1;v+='&nbsp; <a id="showSelectedLink_'+s.qid+' tabIndex="'+x+'"  href="javascript:void(0);" dir="auto">(<span id="mlqSelectedCount_'+s.qid+'">0</span> '+LQ_GuiConfig.txtItemsSelected+")</a>";if(t){v+="</div>";}}if(t){v+="</div>";}return v;};var o=function(x,v){var w=LQ_Utils.getFinalSelectId(s.qid);var u={};u.listId=x;u.viewId=v;u.elementTypes={};u.elementTypes[w]=s.isMultiple?2:1;u.perPageCounts={};u.perPageCounts[w]=s.perPageCount;u.expressions=[];u.layoutColumns={};u.layoutColumns[w]=1;var z={};z.valueDelimiter="|||";z.valueEquals="===";z.valueFormat="SYMBOLS";z.objectIdColumn="XKSIP_RESPONDENTID";z.complexName="XCONTACT_NAME_COMPLEX";z.emptyFieldView="[EMPTY]";var y={};y.questionsMap={};y.questionsMap[s.qid]={};y.questionsMap[s.qid].lookup=u;y.lookupEnv=z;return y;};var p=function(v,u){LQ_Utils.log("Init lookup survData: "+v+", "+u);var w=o(v,u);if(typeof window.survData==="undefined"||window.survData==null){window.survData=w;}else{window.survData.questionsMap[s.qid]=w.questionsMap[s.qid];if(typeof window.survData.lookupEnv==="undefined"||window.survData.lookupEnv==null){window.survData.lookupEnv=w.lookupEnv;}}};var q=function(){var u=window.survData.questionsMap[s.qid].lookup;u.elementTypes[s.elementId]=1;u.layoutColumns[s.elementId]=1;u.perPageCounts[s.elementId]=s.perPageCount;};var d=function(w,u,v){if(s.isMultiple){throw"MLQ is not supported for using as separate element.";}if(!w){throw"LookupControl: undefined listId";}if(typeof u==="undefined"||u==null||u=="null"||u==""){u=-1;}p(w,u);if(typeof v==="undefined"||v==null||v.length<=0){a();}else{i(v);}j();m();};var n=function(u){if(s.isMultiple){throw"MLQ is not supported for using as separate element.";}q();if(typeof u==="undefined"||u==null||u.length<=0){a();}else{i(u);}g();m();};var k=function(v,u){p(v,u);j();m();};var l=function(u,v){e(document).on("change",u,v);};var f=function(u){e(document).off("change",u);};var m=function(){LQ_Core.resetControl(s.qid,s.elementId);};var c=function(w,v,u){LQ_Core.showFinalSelectedResult(w,v,u);};var h=function(u,x,w,v){LQ_Core.showFinalSelectedResultByContainer(u,x,w,v);};return{renderHtml:a,createFinalSelectorTag:d,createFilterSelectorTag:n,initSelectorTag:k,addListener:l,removeListener:f,setResult:c,setResultByContainer:h};}