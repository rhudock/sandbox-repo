var LQ_Offline=null;var LQ_Online=(function(d,b,a){var e=[];var j=10;var c=function(s,q,p,n,m,l){var o=e[n];var r=KS_Utils.currentTime();if(o&&o!=null){setTimeout(function(){c(s,q,p,n,m,l);},j);}else{i(s,q,p,n,m,l);}};var i=function(s,p,o,n,m,l){a.log("[Online] Load data from Main Server ...");var r=KS_Utils.currentTime();e[n]=r;var q={};q[b.headerFormat]=s.getLookupEnv().valueFormat;d.ajax({type:"POST",url:(l?l:"")+"/Member/LookupSelect.action",headers:q,data:p,cache:false,success:function(u,v,t){a.log("Loaded in "+(KS_Utils.currentTime()-r)+" ms.");h(t);s.loadingSuccessEvent(o,n,m,u,p);e[n]=null;},error:function(t){a.log("ERROR: "+t.responseText);s.hideProgressBar();e[n]=null;},});};var g=function(s,t,v,w,l,x,n,m,u){var r={};r.LoadDataRow="1";r.listId=s.getListId(t);r.viewId=s.getViewId(t);if(w){r.dataObjectId=v;}else{r.keyValue=v;}r.questionId=t;r.previewSingleQuestion=l;var q=[];var o=[];if(n){q=s.getRespondentResults(t);o=s.getVotingFilters(a.getFinalSelectId(t),t);}var p=d.extend(r,q,o);return d.ajax({type:"POST",url:"/Member/LookupData.action",data:p,success:function(B){a.log("SUCCESS: "+B);var z=B[s.getAnswerObjectId(t)];var y=B[s.getAnswerObjectViewId(t)];if(u){u(z);return false;}if(z){s.populateResult(t,z,B);}else{s.resetResults(t,true);}var A=new LQ_Event(a.getFinalSelectId(t),y,z,t,0,true,(m==false));s.fireGlobalChangeEvent(A);s.refreshQuestiondependency(t);if(x){x(B,z);}},error:function(y){a.log("ERROR: "+y.responseText);if(u){u(null);return false;}if(!s.isMultipleQuestion(t)){s.resetResults(t,true);}},cache:false});};var k=function(s,q,m,p,r,l,o,n){return g(s,q,m,true,p,r,l,o,n);};var f=function(s,q,p,o,r,l,n,m){return g(s,q,p,false,o,r,l,n,m);};var h=function(m){var l=m.getResponseHeader(b.headerFormat);if(!l||l=="BREAKS"){var n=LQ_Core.getLookupEnv();n.valueDelimiter="\n";n.valueEquals="\r";n.valueFormat="BREAKS";}};return{loadDataOnline:c,loadFinalResultsById:k,loadFinalResultsByKey:f};})(jQuery,LQ_GuiConfig,LQ_Utils);